(()=>{var t={};t.id=888,t.ids=[888],t.modules={1484:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{default:()=>n});var o=r(997),s=r(8269);r(8819);var c=r(3590),l=t([s,c]);function n({Component:t,pageProps:e}){return(0,o.jsxs)(s.H,{children:[o.jsx(t,{...e}),o.jsx(c.ToastContainer,{})]})}[s,c]=l.then?(await l)():l,a()}catch(t){a(t)}})},3118:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.d(e,{Z:()=>l});var o=r(9648),s=t([o]);let c=(o=(s.then?(await s)():s)[0]).default.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}});c.interceptors.request.use(t=>{let e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));let l=c;a()}catch(t){a(t)}})},8269:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.d(e,{H:()=>i,a:()=>u});var o=r(997),s=r(6689),c=r(2938),l=t([c]);c=(l.then?(await l)():l)[0];let n=(0,s.createContext)(null),i=({children:t})=>{let[e,r]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=localStorage.getItem("token"),e=localStorage.getItem("companyName");t&&e&&r({loginId:"",companyName:e})},[]);let a=async(t,e)=>{try{let{token:a,companyName:o}=await (0,c.x)(t,e);localStorage.setItem("token",a),r({loginId:t,companyName:o})}catch(t){throw Error("ログインに失敗しました")}};return o.jsx(n.Provider,{value:{user:e,login:a,logout:()=>{localStorage.removeItem("token"),r(null)}},children:t})},u=()=>{let t=(0,s.useContext)(n);if(!t)throw Error("useAuth must be used within an AuthProvider");return t};a()}catch(t){a(t)}})},2938:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.d(e,{x:()=>c});var o=r(3118),s=t([o]);o=(s.then?(await s)():s)[0];let c=async(t,e)=>{try{let r=await o.Z.post("/api/login",{loginId:t,password:e});console.log(r);let{token:a,companyName:s}=r.data;return localStorage.setItem("token",a),localStorage.setItem("companyName",s),{token:a,companyName:s}}catch(t){throw console.error("ログインエラー",t),Error("ログインに失敗しました")}};a()}catch(t){a(t)}})},8819:()=>{},6689:t=>{"use strict";t.exports=require("react")},997:t=>{"use strict";t.exports=require("react/jsx-runtime")},9648:t=>{"use strict";t.exports=import("axios")},3590:t=>{"use strict";t.exports=import("react-toastify")}};var e=require("../webpack-runtime.js");e.C(t);var r=e(e.s=1484);module.exports=r})();